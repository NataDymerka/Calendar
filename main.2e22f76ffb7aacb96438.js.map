{"version":3,"sources":["webpack:///./js/index.js"],"names":["iDragged","jDragged","allEventsData","newEventBtn","document","querySelector","calendar","eventName","eventTime","eventDay","modalHeader","eventFailed","chooseEventMember","drawCalendar","row","col","heading","Array","i","createElement","classList","add","appendChild","j","contains","innerHTML","handleWarrning","value","remove","drawEvent","arr","cell","querySelectorAll","children","addEventListener","e","preventDefault","getDropGlobals","cellTitle","cellText","btn","cross","textContent","append","prepend","participants","join","setAttribute","dragObj","setTimeout","saveDragGlobals","window","confirm","style","backgroundColor","localStorage","setItem","JSON","stringify","eventDelete","parse","getItem","selected","eventParticipants","from","map","el","length","data","click","alert","chosenMember","includes"],"mappings":"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","file":"main.2e22f76ffb7aacb96438.js","sourcesContent":["const newEventBtn = document.querySelector('.event-create');\nconst calendar = document.querySelector('#calendar');\nconst eventName = document.querySelector('#event-name');\nconst eventTime = document.querySelector('#time'); // element of modal\nconst eventDay = document.querySelector('#day'); // element of modal\nconst modalHeader = document.querySelector('.modal-header');\nconst eventFailed = document.querySelector('.event-failed'); // modal-header text of warning\nconst chooseEventMember = document.querySelector('#members'); // selector for events filter\nlet iDragged; // 2d array coordinates of dragged event\nlet jDragged; // 2d array coordinates of dragged event\n\n// create 2d array 10x6\nlet allEventsData;\n\n// html calendar grid create\nconst drawCalendar = () => {\n  let row;\n  let col;\n  const heading = new Array('Time', 'Mon', 'Thu', 'Wed', 'Thu', 'Fri'); // column names\n\n  for (let i = 0; i < 10; i += 1) {\n    row = document.createElement('div');\n    row.classList.add('row');\n    if (i === 0) {\n      row.classList.add('heading');\n    }\n    calendar.appendChild(row);\n\n    for (let j = 0; j < 6; j += 1) {\n      col = document.createElement('div');\n      col.classList.add('col', 'border');\n      row.appendChild(col);\n      if (row.classList.contains('heading')) {\n        col.innerHTML = heading[j];\n      } else if (j === 0) {\n        col.innerHTML = `1${i - 1}:00`; // 10:00, 11:00, 12:00 etc\n      }\n    }\n  }\n};\n\nconst handleWarrning = () => {\n  if (allEventsData[eventTime.value][eventDay.value] !== null) { // calendar slot is booked\n    eventFailed.innerHTML = 'Failed to create an event. Time slot is already booked.';\n    modalHeader.classList.add('warning');\n  } else {\n    eventFailed.innerHTML = '';\n    modalHeader.classList.remove('warning');\n  }\n};\n\nconst saveDragGlobals = (dragObj, i, j) => { // dragObj is dragged slot\n  setTimeout(() => {\n    dragObj.classList.add('hide');\n  }, 0);\n  iDragged = i; // pass to drop handler\n  jDragged = j;// pass to drop handler\n};\n\nconst eventDelete = (i, j) => {\n  if (window.confirm(`Are you sure you want to delete \"${allEventsData[i][j].eventName}\" event?`)) {\n    const cell = calendar.querySelectorAll('.row')[i].children[j];\n    allEventsData[i][j] = null;\n    cell.innerHTML = '';\n    cell.style.backgroundColor = '#fff';\n    localStorage.setItem('event', JSON.stringify(allEventsData));\n  }\n};\n\nconst drawEvent = (arr) => {\n  calendar.innerHTML = '';\n  drawCalendar();\n  for (let i = 1; i < 10; i += 1) {\n    for (let j = 1; j < 6; j += 1) {\n      const cell = calendar.querySelectorAll('.row')[i].children[j];\n      if (arr[i][j] == null) {\n        // drag and drop\n        cell.addEventListener('dragover', (e) => {\n          e.preventDefault();\n        });\n        cell.addEventListener('dragenter', () => {\n          cell.classList.add('hovered');\n        });\n        cell.addEventListener('dragleave', () => {\n          cell.classList.remove('hovered');\n        });\n        cell.addEventListener('drop', () => {\n          getDropGlobals(i, j, cell);\n        });\n      } else {\n        cell.classList.add('event');\n        const cellTitle = document.createElement('p');\n        const cellText = document.createElement('p');\n        const btn = document.createElement('button');\n        btn.classList.add('event-delete', 'close');\n        const cross = document.createElement('span');\n        cross.textContent = 'x';\n\n        btn.appendChild(cross);\n        cell.append(cellTitle);\n        cell.append(cellText);\n        cell.prepend(btn);\n\n        cellTitle.innerHTML = `${arr[i][j].eventName}`;\n        cellTitle.classList.add('event-title');\n        cellText.innerHTML = `<br> ${arr[i][j].participants.join(', ')}`;\n\n        // drag and drop\n        cell.setAttribute('draggable', true);\n        cell.addEventListener('dragstart', () => { saveDragGlobals(cell, i, j); });\n        cell.addEventListener('dragend', () => {\n          cell.classList.remove('hide');\n        });\n\n        // deletion of the event\n        btn.addEventListener('click', () => { eventDelete(i, j); });\n      }\n    }\n  }\n};\n\nfunction getDropGlobals(i, j, cell) {\n  allEventsData[i][j] = allEventsData[iDragged][jDragged];\n  allEventsData[iDragged][jDragged] = null;\n  cell.classList.remove('hovered');\n  drawEvent(allEventsData);\n  localStorage.setItem('event', JSON.stringify(allEventsData));\n}\n\n// Event creation and its data saving\nconst createEvent = () => {\n  if (eventName.value === '') {\n    window.alert('You should name your meeting!');\n    return;\n  }\n  const selected = document.querySelectorAll('#participants option:checked');\n  const eventParticipants = Array.from(selected).map((el) => el.value);\n\n  if (eventParticipants.length === 0) {\n    window.alert('You should choose the participants!');\n    return;\n  }\n  const data = {};\n  data.eventName = eventName.value;\n  data.eventTime = eventTime.value;\n  data.eventDay = eventDay.value;\n  data.participants = eventParticipants;\n\n  if (allEventsData[data.eventTime][data.eventDay] == null) {\n    allEventsData[data.eventTime][data.eventDay] = data;\n  } else {\n    eventFailed.innerHTML = 'Failed to create an event. Time slot is already booked.';\n    modalHeader.classList.add('warning');\n    return;\n  }\n\n  localStorage.setItem('event', JSON.stringify(allEventsData));\n  document.querySelector('.close').click(); // trigger click to close modal window\n\n  drawEvent(allEventsData);\n};\n\nconst selectMember = () => {\n  allEventsData = JSON.parse(localStorage.getItem('event'));\n  const chosenMember = chooseEventMember.value;\n\n  if (chosenMember !== 'all') { // if certain person selected\n    for (let i = 1; i < 10; i += 1) {\n      for (let j = 1; j < 6; j += 1) {\n        if (allEventsData[i][j] !== null) {\n          if (!allEventsData[i][j].participants.includes(chosenMember)) {\n            allEventsData[i][j] = null;\n          }\n        }\n      }\n    }\n  }\n  drawEvent(allEventsData);\n};\n\n// page load\ndrawCalendar();\n\n// // draw data from the local storage\nallEventsData = JSON.parse(localStorage.getItem('event'));\nif (allEventsData == null) {\n  allEventsData = new Array(10);\n  for (let i = 0; i < 10; i += 1) {\n    allEventsData[i] = new Array(null, null, null, null, null, null);\n  }\n} else {\n  drawEvent(allEventsData);\n}\n\nnewEventBtn.addEventListener('click', createEvent); // button 'Create' of modal\neventTime.addEventListener('click', handleWarrning);\neventDay.addEventListener('click', handleWarrning);\nchooseEventMember.addEventListener('change', selectMember);\n"],"sourceRoot":""}